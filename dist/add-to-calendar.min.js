!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).addToCalendar=t()}}(function(){return function(){return function t(e,n,r){function a(i,u){if(!n[i]){if(!e[i]){var l="function"==typeof require&&require;if(!u&&l)return l(i,!0);if(o)return o(i,!0);var c=new Error("Cannot find module '"+i+"'");throw c.code="MODULE_NOT_FOUND",c}var f=n[i]={exports:{}};e[i][0].call(f.exports,function(t){return a(e[i][1][t]||t)},f,f.exports,t,e,n,r)}return n[i].exports}for(var o="function"==typeof require&&require,i=0;i<r.length;i++)a(r[i]);return a}}()({1:[function(t,e,n){e.exports=function(){return navigator.languages&&navigator.languages.length?navigator.languages[0]:navigator.userLanguage?navigator.userLanguage:navigator.language}},{}],2:[function(t,e,n){
/* FileSaver.js
 * A saveAs() FileSaver implementation.
 * 1.3.2
 * 2016-06-16 18:25:19
 *
 * By Eli Grey, http://eligrey.com
 * License: MIT
 *   See https://github.com/eligrey/FileSaver.js/blob/master/LICENSE.md
 */
var r=r||function(t){"use strict";if(!(void 0===t||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var e=t.document,n=function(){return t.URL||t.webkitURL||t},r=e.createElementNS("http://www.w3.org/1999/xhtml","a"),a="download"in r,o=/constructor/i.test(t.HTMLElement)||t.safari,i=/CriOS\/[\d]+/.test(navigator.userAgent),u=function(e){(t.setImmediate||t.setTimeout)(function(){throw e},0)},l=function(t){setTimeout(function(){"string"==typeof t?n().revokeObjectURL(t):t.remove()},4e4)},c=function(t){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob([String.fromCharCode(65279),t],{type:t.type}):t},f=function(e,f,d){d||(e=c(e));var s,v=this,p="application/octet-stream"===e.type,g=function(){!function(t,e,n){for(var r=(e=[].concat(e)).length;r--;){var a=t["on"+e[r]];if("function"==typeof a)try{a.call(t,n||t)}catch(o){u(o)}}}(v,"writestart progress write writeend".split(" "))};if(v.readyState=v.INIT,a)return s=n().createObjectURL(e),void setTimeout(function(){var t,e;r.href=s,r.download=f,t=r,e=new MouseEvent("click"),t.dispatchEvent(e),g(),l(s),v.readyState=v.DONE});!function(){if((i||p&&o)&&t.FileReader){var r=new FileReader;return r.onloadend=function(){var e=i?r.result:r.result.replace(/^data:[^;]*;/,"data:attachment/file;");t.open(e,"_blank")||(t.location.href=e),e=undefined,v.readyState=v.DONE,g()},r.readAsDataURL(e),void(v.readyState=v.INIT)}s||(s=n().createObjectURL(e)),p?t.location.href=s:t.open(s,"_blank")||(t.location.href=s);v.readyState=v.DONE,g(),l(s)}()},d=f.prototype;return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(t,e,n){return e=e||t.name||"download",n||(t=c(t)),navigator.msSaveOrOpenBlob(t,e)}:(d.abort=function(){},d.readyState=d.INIT=0,d.WRITING=1,d.DONE=2,d.error=d.onwritestart=d.onprogress=d.onwrite=d.onabort=d.onerror=d.onwriteend=null,function(t,e,n){return new f(t,e||t.name||"download",n)})}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);void 0!==e&&e.exports&&(e.exports.saveAs=r)},{}],3:[function(t,e,n){
/**
 * lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash modularize exports="npm" -o ./`
 * Copyright jQuery Foundation and other contributors <https://jquery.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */
var r=9007199254740991,a="[object Arguments]",o="[object Function]",i="[object GeneratorFunction]",u=/^(?:0|[1-9]\d*)$/;var l,c,f=Object.prototype,d=f.hasOwnProperty,s=f.toString,v=f.propertyIsEnumerable,p=(l=Object.keys,c=Object,function(t){return l(c(t))}),g=Math.max,y=!v.call({valueOf:1},"valueOf");function h(t,e){var n=E(t)||function(t){return function(t){return function(t){return!!t&&"object"==typeof t}(t)&&_(t)}(t)&&d.call(t,"callee")&&(!v.call(t,"callee")||s.call(t)==a)}(t)?function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],r=n.length,o=!!r;for(var i in t)!e&&!d.call(t,i)||o&&("length"==i||b(i,r))||n.push(i);return n}function m(t,e,n){var r=t[e];d.call(t,e)&&O(r,n)&&(n!==undefined||e in t)||(t[e]=n)}function b(t,e){return!!(e=null==e?r:e)&&("number"==typeof t||u.test(t))&&t>-1&&t%1==0&&t<e}function w(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||f)}function O(t,e){return t===e||t!=t&&e!=e}var E=Array.isArray;function _(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=r}(t.length)&&!function(t){var e=T(t)?s.call(t):"";return e==o||e==i}(t)}function T(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}var j=function(t){return e=function(e,n){var r=-1,a=n.length,o=a>1?n[a-1]:undefined,i=a>2?n[2]:undefined;for(o=t.length>3&&"function"==typeof o?(a--,o):undefined,i&&function(t,e,n){if(!T(n))return!1;var r=typeof e;return!!("number"==r?_(n)&&b(e,n.length):"string"==r&&e in n)&&O(n[e],t)}(n[0],n[1],i)&&(o=a<3?undefined:o,a=1),e=Object(e);++r<a;){var u=n[r];u&&t(e,u,r,o)}return e},n=g(n===undefined?e.length-1:n,0),function(){for(var t=arguments,r=-1,a=g(t.length-n,0),o=Array(a);++r<a;)o[r]=t[n+r];r=-1;for(var i=Array(n+1);++r<n;)i[r]=t[r];return i[n]=o,function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}(e,this,i)};var e,n}(function(t,e){if(y||w(e)||_(e))!function(t,e,n,r){n||(n={});for(var a=-1,o=e.length;++a<o;){var i=e[a],u=r?r(n[i],t[i],i,n,t):undefined;m(n,i,u===undefined?t[i]:u)}}(e,function(t){return _(t)?h(t):function(t){if(!w(t))return p(t);var e=[];for(var n in Object(t))d.call(t,n)&&"constructor"!=n&&e.push(n);return e}(t)}(e),t);else for(var n in e)d.call(e,n)&&m(t,n,e[n])});e.exports=j},{}],4:[function(t,e,n){
/**
 * lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash modularize exports="npm" -o ./`
 * Copyright jQuery Foundation and other contributors <https://jquery.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */
var r=9007199254740991,a="[object Arguments]",o="[object Function]",i="[object GeneratorFunction]",u=/^(?:0|[1-9]\d*)$/;var l,c,f=Object.prototype,d=f.hasOwnProperty,s=f.toString,v=f.propertyIsEnumerable,p=(l=Object.keys,c=Object,function(t){return l(c(t))});function g(t,e){var n=m(t)||function(t){return function(t){return function(t){return!!t&&"object"==typeof t}(t)&&b(t)}(t)&&d.call(t,"callee")&&(!v.call(t,"callee")||s.call(t)==a)}(t)?function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],r=n.length,o=!!r;for(var i in t)!e&&!d.call(t,i)||o&&("length"==i||h(i,r))||n.push(i);return n}function y(t){if(n=(e=t)&&e.constructor,r="function"==typeof n&&n.prototype||f,e!==r)return p(t);var e,n,r,a=[];for(var o in Object(t))d.call(t,o)&&"constructor"!=o&&a.push(o);return a}function h(t,e){return!!(e=null==e?r:e)&&("number"==typeof t||u.test(t))&&t>-1&&t%1==0&&t<e}var m=Array.isArray;function b(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=r}(t.length)&&!function(t){var e=function(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}(t)?s.call(t):"";return e==o||e==i}(t)}e.exports=function(t){return b(t)?g(t):y(t)}},{}],5:[function(t,e,n){window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=function(t,e){e=e||window;for(var n=0;n<this.length;n++)t.call(e,this[n],n,this)})},{}],6:[function(t,e,n){String.prototype.startsWith||function(){"use strict";var t=function(){try{var t={},e=Object.defineProperty,n=e(t,t,t)&&e}catch(r){}return n}(),e={}.toString,n=function(t){if(null==this)throw TypeError();var n=String(this);if(t&&"[object RegExp]"==e.call(t))throw TypeError();var r=n.length,a=String(t),o=a.length,i=arguments.length>1?arguments[1]:undefined,u=i?Number(i):0;u!=u&&(u=0);var l=Math.min(Math.max(u,0),r);if(o+l>r)return!1;for(var c=-1;++c<o;)if(n.charCodeAt(l+c)!=a.charCodeAt(c))return!1;return!0};t?t(String.prototype,"startsWith",{value:n,configurable:!0,writable:!0}):String.prototype.startsWith=n}()},{}],7:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.autoLoad=n.createCalendar=void 0;var r=b(t("browser-locale"));t("nodelist-foreach-polyfill");var a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e["default"]=t,e}(t("file-saver")),o=b(t("lodash.assign")),i=b(t("lodash.keys"));t("string.prototype.startswith");var u,l=b(t("./generators/ics")),c=b(t("./generators/google")),f=b(t("./generators/yahoo")),d=t("./generators/utils"),s=b(t("./translations/en")),v=b(t("./translations/cn")),p=b(t("./translations/de")),g=b(t("./translations/es")),y=b(t("./translations/fr")),h=b(t("./translations/jp")),m=b(t("./translations/ru"));function b(t){return t&&t.__esModule?t:{"default":t}}function w(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var O={cn:(0,o["default"])({},s["default"],v["default"]),de:(0,o["default"])({},s["default"],p["default"]),en:s["default"],es:(0,o["default"])({},s["default"],g["default"]),fr:(0,o["default"])({},s["default"],y["default"]),jp:(0,o["default"])({},s["default"],h["default"]),ru:(0,o["default"])({},s["default"],m["default"])},E={iCalendar:"iCalendar",googleCalendar:"googleCalendar",outlook:"outlook",yahoo:"yahoo"},_=(w(u={},E.iCalendar,l["default"]),w(u,E.googleCalendar,c["default"]),w(u,E.outlook,l["default"]),w(u,E.yahoo,f["default"]),u),T=function(t,e,n){var a=function(t,e){var n={language:"auto",calendars:(0,i["default"])(E)},a=!1;"atcOverrides"in window&&(n=(0,o["default"])({},n,window.atcOverrides)),Array.prototype.filter.call(t.attributes,function(t){return t.name.startsWith("data-atc-")}).forEach(function(t){var e=t.name.replace("data-atc-","");"translations"===e?a=JSON.parse(t.value):n[e]=t.value}),e&&(n=(0,o["default"])({},n,e));var u=(0,r["default"])().substr(0,2);"auto"===n.language&&(n.language=u),n.language=O[n.language]?n.language:"en";var l=(0,o["default"])({},O[n.language],n.translations||{});return a&&(l=(0,o["default"])({},l,a)),n.translations=l,n}(t,e),u=document.createElement("ul");u.className="atcb-list";var c="";a.calendars.forEach(function(e){n=n||function(t){var e=t.querySelectorAll("var.atc_event");return Array.prototype.map.call(e,function(t){var e=t.querySelectorAll("var"),n={};return e.forEach(function(t){var e=t.className.replace("atc_","");n[e]=t.innerHTML}),n})}(t);var r=function(t,e,n,r){var a=""===n.id?"":'id="'.concat(n.id,"_").concat(r,'_link"'),o=t.translations[r];if((0,d.isIE)()>=10&&(r===E.outlook||r===E.iCalendar))return"<a ".concat(a,' class="atcb-item-link ').concat(r,"\" data-event='").concat(JSON.stringify(e),"'>").concat(o,"</a>");var i=_[r];if(!i)return i=l["default"],console.warn("Generator for '".concat(r,"' not found, will be used ics instead")),"";var u=i(e);return"<a ".concat(a,' class="atcb-item-link ').concat(r,'" href="').concat(u,'" target="_blank" rel="nofollow">').concat(o,"</a>")}(a,n,t,e);c+='<li class="atcb-item">'.concat(r,"</li>")}),u.innerHTML=c;var f=document.createElement("a");f.className="atcb-link",f.innerHTML=a.translations.buttonText,f.id=""===t.id?"":"".concat(t.id,"_link"),f.tabIndex=1,t.appendChild(f),t.appendChild(u)};n.createCalendar=T;var j=function(t){t.addEventListener("click",function(e){e.preventDefault();var n=JSON.parse(t.getAttribute("data-event"));!function(t){var e;if((0,d.isIE)()<11){var n=new MSBlobBuilder;n.append(t),e=n.getBlob("text/x-vCalendar;charset=utf8")}else e=new Blob([t]);a.saveAs(e,"event.ics")}((0,l["default"])(n))})},S=function(){var t=document.getElementsByClassName("addtocalendar");Array.prototype.forEach.call(t,function(t){T(t)}),document.querySelectorAll(".atcb-item-link[data-event]").forEach(j)};n.autoLoad=S,S()},{"./generators/google":8,"./generators/ics":10,"./generators/utils":11,"./generators/yahoo":12,"./translations/cn":13,"./translations/de":14,"./translations/en":15,"./translations/es":16,"./translations/fr":17,"./translations/jp":18,"./translations/ru":19,"browser-locale":1,"file-saver":2,"lodash.assign":3,"lodash.keys":4,"nodelist-foreach-polyfill":5,"string.prototype.startswith":6}],8:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=void 0;var r=t("./utils"),a=function(t){t=(0,r.convertEventParamsFromATC)(t[0]);var e=(0,r.formatTime)(t.start),n=(0,r.calculateEndTime)(t);return encodeURI(["https://www.google.com/calendar/render","?action=TEMPLATE","&text=".concat(t.title||""),"&dates=".concat(e||"","/").concat(n||""),"&details=".concat(t.description||""),"&location=".concat(t.address||""),"&sprop=&sprop=name:"].join(""))};n["default"]=a},{"./utils":11}],9:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=void 0;var r,a=(r=t("lodash.keys"))&&r.__esModule?r:{"default":r};
/** @license https://github.com/AddToCalendar/addtocalendar The MIT License (MIT) Copyright (c) 2015 AddToCalendar */
var o=function(t){t=t.map(function(t,e){return(0,a["default"])(t).map(function(n){var r=t[n];return"e[".concat(e,"][").concat(n,"]=").concat(encodeURIComponent(r))}).join("&")});var e=-(new Date).getTimezoneOffset().toString(),n=["utz=".concat(e),"uln=".concat(navigator.language),"vjs=".concat("1.5")].concat(t);return"https://".concat("addtocalendar.com/atc/","outlook?").concat(n.join("&"))};n["default"]=o},{"lodash.keys":4}],10:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=void 0;var r,a=(r=t("./ics-atc"))&&r.__esModule?r:{"default":r},o=t("./utils");var i=function(t){if((0,o.isIE)()<10)return(0,a["default"])(t);t=(0,o.convertEventParamsFromATC)(t[0]);var e=(0,o.formatTime)(t.start),n=(0,o.calculateEndTime)(t),r=["BEGIN:VCALENDAR","VERSION:2.0","BEGIN:VEVENT","URL:"+document.URL,"DTSTART:"+(e||""),"DTEND:"+(n||""),"SUMMARY:"+(t.title||""),"DESCRIPTION:"+(t.description||""),"LOCATION:"+(t.address||""),"END:VEVENT","END:VCALENDAR"].join("\n");return(0,o.isIE)()?r:encodeURI("data:text/calendar;charset=utf8,".concat(r))};n["default"]=i},{"./ics-atc":9,"./utils":11}],11:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.isIE=n.convertEventParamsFromATC=n.calculateEndTime=n.formatTime=n.MS_IN_MINUTES=void 0;var r,a=(r=t("lodash.assign"))&&r.__esModule?r:{"default":r};n.MS_IN_MINUTES=6e4;var o=function(t){return t.toISOString().replace(/-|:|\.\d+/g,"")};n.formatTime=o;n.calculateEndTime=function(t){return t.end?o(t.end):o(new Date(t.start.getTime()+6e4*t.duration))};var i=function(t){return t&&"string"==typeof t&&(t=new Date(t)),t};n.convertEventParamsFromATC=function(t){var e=i(t.date_start),n=i(t.date_end);return(0,a["default"])({},t,{start:e,end:n})};n.isIE=function(){var t=document.createElement("input");return window.ActiveXObject===undefined?undefined:document.addEventListener?window.atob?t.dataset?11:10:9:8}},{"lodash.assign":3}],12:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=void 0;var r=t("./utils"),a=function(t){var e=(t=(0,r.convertEventParamsFromATC)(t[0])).end?(t.end.getTime()-t.start.getTime())/r.MS_IN_MINUTES:t.duration,n=(e<600?"0"+Math.floor(e/60):Math.floor(e/60)+"")+(e%60<10?"0"+e%60:e%60+""),a=(0,r.formatTime)(new Date(t.start-t.start.getTimezoneOffset()*r.MS_IN_MINUTES))||"";return encodeURI(["https://calendar.yahoo.com/?v=60&view=d&type=20","&title="+(t.title||""),"&st="+a,"&dur="+(n||""),"&desc="+(t.description||""),"&in_loc="+(t.address||"")].join(""))};n["default"]=a},{"./utils":11}],13:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=void 0;n["default"]={buttonText:"添加到日历"}},{}],14:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=void 0;n["default"]={buttonText:"In den Kalender"}},{}],15:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=void 0;n["default"]={buttonText:"Add to Calendar",iCalendar:"iCalendar",googleCalendar:"Google Calendar",outlook:"Outlook",yahoo:"Yahoo! Calendar"}},{}],16:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=void 0;n["default"]={buttonText:"Añadir al Calendario"}},{}],17:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=void 0;n["default"]={buttonText:"Ajouter au calendrier"}},{}],18:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=void 0;n["default"]={buttonText:"カレンダーに追加"}},{}],19:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=void 0;n["default"]={buttonText:"Добавить в календарь"}},{}]},{},[7])(7)});